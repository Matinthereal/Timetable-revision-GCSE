<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GCSE Revision — Matin</title>
  <meta name="description" content="Aesthetic, intuitive GCSE revision planner with timers, notes, progress, and a full weekly timetable." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Your palette */
      --peach: #FFCDb2;
      --light-pink: #FFB4A2;
      --medium-pink: #E5989B;
      --mauve: #B5838C;
      --deep-mauve: #6D6875;

      /* Neutrals */
      --white: #ffffff;
      --black: #000000;
      --gray: #cccccc;

      /* Subject colors */
      --maths: var(--peach);
      --physics: var(--light-pink);
      --chemistry: var(--medium-pink);
      --english: var(--mauve);
      --geography: var(--deep-mauve);
      --break: var(--gray);

      /* UI */
      --accent: var(--medium-pink);
      --accent-2: var(--mauve);
      --text: #1f1f1f;
      --muted: #6b6b6b;
      --border: rgba(0,0,0,0.12);
      --card: rgba(255,255,255,0.85);
      --shadow: 0 10px 24px rgba(0,0,0,0.12);
    }

    /* Background gradient animation */
    body {
      margin:0; padding:0;
      background: linear-gradient(135deg, var(--peach), var(--light-pink), var(--medium-pink), var(--mauve), var(--deep-mauve));
      background-size: 300% 300%;
      animation: bgShift 24s ease infinite;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      line-height: 1.6;
    }
    @keyframes bgShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container { max-width: 1100px; margin: 0 auto; padding: 32px 20px 90px; }

    header { display: grid; grid-template-columns: 1fr auto; gap: 14px; align-items: end; margin-bottom: 18px; }
    .title {
      font-family: "Playfair Display", serif;
      font-weight: 700;
      font-size: clamp(32px, 5vw, 46px);
      margin: 0;
      color: var(--black);
    }
    .subtitle { color: var(--muted); font-weight: 600; margin-top: 6px; }

    .actions { display: flex; gap: 10px; flex-wrap: wrap; justify-content: flex-end; }
    .btn {
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease;
    }
    .btn:hover { transform: translateY(-1px); opacity: .95; }
    .btn-primary { background: var(--accent); color: var(--white); border-color: transparent; }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
      margin-bottom: 16px;
    }
    h2 { font-family: "Playfair Display", serif; font-weight: 700; font-size: clamp(22px, 3vw, 28px); margin: 4px 0 12px; }

    /* Tabs */
    .tabs { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
    .tab {
      padding: 8px 12px; border-radius: 999px; border: 1px solid var(--border);
      background: var(--white); cursor: pointer; font-weight: 700; color: var(--text);
    }
    .tab.active { background: var(--accent); color: var(--white); border-color: transparent; }

    /* Schedule rows */
    .row {
      display: grid; grid-template-columns: 130px 1fr; gap: 12px; align-items: center;
      padding: 10px; border-radius: 12px; margin-bottom: 8px; border: 1px solid var(--border);
      background: var(--white);
    }
    .time { font-weight: 800; color: var(--muted); text-align: center; }
    .slot { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .chip { width: 14px; height: 14px; border-radius: 4px; }
    .chip.maths{background:var(--maths);} .chip.physics{background:var(--physics);}
    .chip.chemistry{background:var(--chemistry);} .chip.english{background:var(--english);}
    .chip.geography{background:var(--geography);} .chip.break{background:var(--break);}
    .subject { font-weight: 800; }
    .tag { font-size: 12px; font-weight: 700; padding: 4px 8px; border-radius: 999px; background: var(--card); border: 1px solid var(--border); }

    /* Timer and progress */
    .timer {
      display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center;
      padding: 12px; border-radius: 12px; border: 1px solid var(--border);
      background: var(--white);
      margin-bottom: 10px;
    }
    .clock { font-size: 26px; font-weight: 800; letter-spacing: 1px; }
    .controls { display: flex; gap: 10px; flex-wrap: wrap; }

    .progress-wrap { margin-top: 8px; }
    .progress-bar { height: 12px; border-radius: 999px; background: rgba(0,0,0,0.08); overflow: hidden; border: 1px solid var(--border); }
    .progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .25s ease; }

    .note {
      width: 100%; min-height: 70px; border-radius: 10px; border: 1px solid var(--border);
      padding: 10px; background: var(--white);
    }

    /* Full week table */
    .week-table { width: 100%; border-collapse: collapse; }
    .week-table th, .week-table td { border: 1px solid var(--border); padding: 8px; text-align: center; }
    .week-table th { background: var(--accent); color: var(--white); }

    /* Tips */
    .tips { display: grid; gap: 10px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    .tip { border: 1px solid var(--border); border-radius: 12px; padding: 10px; background: var(--white); }
    .tip h3 { margin: 2px 0 6px; font-size: 18px; font-weight: 800; }

    footer { text-align: center; color: var(--muted); margin-top: 20px; font-size: 13px; }
    @media (max-width: 740px){ .row { grid-template-columns: 110px 1fr; } }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1 class="title">GCSE Revision — Matin</h1>
        <div class="subtitle">45-minute blocks, 5–7 minute breaks. Days: Monday, Tuesday, Thursday, Friday, Sunday. 5:00–9:00 PM.</div>
      </div>
      <div class="actions">
        <button class="btn-primary" onclick="window.print()">Print / Save PDF</button>
        <button class="btn" id="toggle-view">Switch to Full Timetable</button>
      </div>
    </header>

    <!-- Today’s Plan -->
    <div id="today-view">
      <div class="card">
        <h2>Today’s plan</h2>
        <div class="tabs" id="day-tabs"></div>

        <!-- Timer -->
        <div class="timer">
          <div>
            <div id="current-block" class="muted" style="font-weight:800;">Current block: —</div>
            <div id="countdown" class="clock">45:00</div>
            <div id="phase" class="muted">Ready to start a 45-minute study block.</div>
          </div>
          <div class="controls">
            <button class="btn btn-primary" id="start">Start</button>
            <button class="btn" id="pause">Pause</button>
            <button class="btn" id="reset">Reset</button>
            <button class="btn" id="toggle-phase">Switch to Break</button>
          </div>
        </div>

        <!-- Progress -->
        <div class="progress-wrap">
          <div class="muted" id="progress-label">Progress: 0 / 5 blocks</div>
          <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
        </div>

        <!-- Schedule -->
        <div id="schedule" style="margin-top:12px"></div>
      </div>

      <!-- Notes -->
      <div class="card">
        <h2>Notes for today</h2>
        <textarea id="notes" class="note" placeholder="What did you revise? Key takeaways, formulas, vocab, mistakes to fix next time..."></textarea>
      </div>

      <!-- Tips -->
      <div class="card">
        <h2>Tip of the day</h2>
        <div class="tips">
          <div class="tip" id="tip"></div>
        </div>
      </div>
    </div>

    <!-- Full Timetable -->
    <div class="card" id="full-timetable" style="display:none;">
      <h2>Full week timetable</h2>
      <div style="overflow-x:auto">
        <table class="week-table" role="table" aria-label="Full weekly timetable">
          <thead>
            <tr>
              <th>Time</th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Sunday</th>
            </tr>
          </thead>
          <tbody id="week-body"></tbody>
        </table>
      </div>
    </div>

    <footer>
      Built for GCSE success • Focus, consistency, and smart practice.
    </footer>
  </div>

  <script>
    // Data
    const DAYS = ["Monday","Tuesday","Thursday","Friday","Sunday"];
    const SCHEDULE = {
      "Monday": [
        { time: "5:00 – 5:45", subject: "English Literature", color:"english", tag:"Essays + quotes" },
        { time: "5:45 – 5:52", subject: "Break", color:"break", tag:"7 mins" },
        { time: "5:52 – 6:37", subject: "Physics", color:"physics", tag:"Forces & energy" },
        { time: "6:37 – 6:42", subject: "Break", color:"break", tag:"5 mins" },
        { time: "6:42 – 7:27", subject: "Chemistry", color:"chemistry", tag:"Atomic structure" },
        { time: "7:27 – 7:34", subject: "Break", color:"break", tag:"7 mins" },
        { time: "7:34 – 8:19", subject: "Maths", color:"maths", tag:"Algebra practice" },
        { time: "8:19 – 8:26", subject: "Break", color:"break", tag:"7 mins" },
        { time: "8:26 – 9:00", subject: "Geography", color:"geography", tag:"Case study recall" }
      ],
      "Tuesday": [
        { time: "5:00 – 5:45", subject: "Physics", color:"physics", tag:"Electricity & waves" },
        { time: "5:45 – 5:52", subject: "Break", color:"break", tag:"7 mins" },
        { time: "5:52 – 6:37", subject: "Chemistry", color:"chemistry", tag:"Organic chemistry" },
        { time: "6:37 – 6:42", subject: "Break", color:"break", tag:"5 mins" },
        { time: "6:42 – 7:27", subject: "Maths", color:"maths", tag:"Geometry & trig" },
        { time: "7:27 – 7:34", subject: "Break", color:"break", tag:"7 mins" },
        { time: "7:34 – 8:19", subject: "English Language", color:"english", tag:"Timed writing" },
        { time: "8:19 – 8:26", subject: "Break", color:"break", tag:"7 mins" },
        { time: "8:26 – 9:00", subject: "Geography", color:"geography", tag:"Physical landscapes" }
      ],
      "Thursday": [
        { time: "5:00 – 5:45", subject: "Maths", color:"maths", tag:"Mixed exam Qs" },
        { time: "5:45 – 5:52", subject: "Break", color:"break", tag:"7 mins" },
        { time: "5:52 – 6:37", subject: "Physics", color:"physics", tag:"Space & nuclear" },
        { time: "6:37 – 6:42", subject: "Break", color:"break", tag:"5 mins" },
        { time: "6:42 – 7:27", subject: "English Literature", color:"english", tag:"Poetry comparison" },
        { time: "7:27 – 7:34", subject: "Break", color:"break", tag:"7 mins" },
        { time: "7:34 – 8:19", subject: "Chemistry", color:"chemistry", tag:"Rates of reaction" },
        { time: "8:19 – 8:26", subject: "Break", color:"break", tag:"7 mins" },
        { time: "8:26 – 9:00", subject: "English Language", color:"english", tag:"Reading comp" }
      ],
      "Friday": [
        { time: "5:00 – 5:45", subject: "English Language", color:"english", tag:"Analysis" },
        { time: "5:45 – 5:52", subject: "Break", color:"break", tag:"7 mins" },
        { time: "5:52 – 6:37", subject: "Geography", color:"geography", tag:"Case study recall" },
        { time: "6:37 – 6:42", subject: "Break", color:"break", tag:"5 mins" },
        { time: "6:42 – 7:27", subject: "Maths", color:"maths", tag:"Statistics & probability" },
        { time: "7:27 – 7:34", subject: "Break", color:"break", tag:"7 mins" },
        { time: "7:34 – 8:19", subject: "Chemistry", color:"chemistry", tag:"Practical skills" },
        { time: "8:19 – 8:26", subject: "Break", color:"break", tag:"7 mins" },
        { time: "8:26 – 9:00", subject: "Physics", color:"physics", tag:"Waves recap" }
      ],
      "Sunday": [
        { time: "5:00 – 5:45", subject: "Maths", color:"maths", tag:"Exam paper practice" },
        { time: "5:45 – 5:52", subject: "Break", color:"break", tag:"7 mins" },
        { time: "5:52 – 6:37", subject: "English Literature", color:"english", tag:"Quotes drill" },
        { time: "6:37 – 6:42", subject: "Break", color:"break", tag:"5 mins" },
        { time: "6:42 – 7:27", subject: "Chemistry", color:"chemistry", tag:"Electrolysis & acids" },
        { time: "7:27 – 7:34", subject: "Break", color:"break", tag:"7 mins" },
        { time: "7:34 – 8:19", subject: "Physics", color:"physics", tag:"Energy & forces" },
        { time: "8:19 – 8:26", subject: "Break", color:"break", tag:"7 mins" },
        { time: "8:26 – 9:00", subject: "English Language", color:"english", tag:"Timed writing" }
      ],
    };

    const TIPS = [
      { t:"Active recall > passive reading", d:"Close the book and write from memory. Teach the topic out loud." },
      { t:"Past papers weekly", d:"Mark against the mark scheme. Learn the exact phrasing that earns points." },
      { t:"Breaks boost focus", d:"5–7 minutes: water, stretch, short walk. No scrolling." },
      { t:"Target weak topics", d:"Keep a list of pitfalls. Revisit until you can explain them simply." },
      { t:"Layered notes", d:"One-page summary with formulas, definitions, and an example." },
      { t:"English technique", d:"Plan fast, quote precisely, analyse clearly. Stop when the clock says." },
      { t:"Maths mastery", d:"Show every step. Check units, significant figures, and error traps." },
      { t:"Science precision", d:"Memorise formulas and variables. Practicals: controls, errors, improvements." },
    ];

    // DOM
    const tabs = document.getElementById('day-tabs');
    const scheduleEl = document.getElementById('schedule');
    const todayView = document.getElementById('today-view');
    const fullTable = document.getElementById('full-timetable');
    const toggleViewBtn = document.getElementById('toggle-view');
    const weekBody = document.getElementById('week-body');
    const notesEl = document.getElementById('notes');
    const tipEl = document.getElementById('tip');
    const currentBlockEl = document.getElementById('current-block');
    const countdownEl = document.getElementById('countdown');
    const phaseEl = document.getElementById('phase');
    const progressFill = document.getElementById('progress-fill');
    const progressLabel = document.getElementById('progress-label');

    // State
    let day = autoSelectDay();
    let selectedIndex = firstStudyIndex(day);
    let phase = 'study'; // 'study' or 'break'
    let timeLeft = 45 * 60; // seconds
    let timerId = null;

    // Build tabs
    DAYS.forEach(d => {
      const b = document.createElement('button');
      b.className = 'tab' + (d === day ? ' active' : '');
      b.textContent = d;
      b.onclick = () => { day = d; setActiveTab(d); renderSchedule(); loadNotes(); resetTimerToStudy(); updateProgress(); };
      tabs.appendChild(b);
    });

    // Render today schedule
    function renderSchedule(){
      scheduleEl.innerHTML = '';
      const blocks = SCHEDULE[day];
      blocks.forEach((b, i) => {
        const row = document.createElement('div'); row.className = 'row';
        const left = document.createElement('div'); left.className = 'time'; left.textContent = b.time;
        const right = document.createElement('div'); right.className = 'slot';
        const chip = document.createElement('div'); chip.className = 'chip ' + b.color;
        const subj = document.createElement('div'); subj.className = 'subject'; subj.textContent = b.subject;
        const tag = document.createElement('div'); tag.className = 'tag'; tag.textContent = b.tag;
        right.append(chip, subj, tag);
        row.append(left, right);

        if (b.subject !== 'Break'){
          row.style.cursor = 'pointer';
          row.title = 'Click to make this the current block';
          row.onclick = () => {
            selectedIndex = i; phase = 'study'; timeLeft = 45 * 60;
            updateTimerUI(); updateCurrentBlockLabel();
          };
        }
        scheduleEl.appendChild(row);
      });
      updateCurrentBlockLabel();
    }

    function firstStudyIndex(d){
      return SCHEDULE[d].findIndex(x => x.subject !== 'Break');
    }

    function setActiveTab(active){
      Array.from(tabs.children).forEach(btn => btn.classList.toggle('active', btn.textContent === active));
    }

    function autoSelectDay(){
      const map = {0:'Sunday',1:'Monday',2:'Tuesday',4:'Thursday',5:'Friday',6:'Sunday'};
      const d = new Date().getDay(); // 0=Sun
      return map[d] || 'Monday';
    }

    // Notes persistence
    function loadNotes(){
      const key = `notes-${day}`;
      notesEl.value = localStorage.getItem(key) || '';
    }
    notesEl.addEventListener('input', () => {
      localStorage.setItem(`notes-${day}`, notesEl.value);
    });

    // Tips
    function setTip(){
      const idx = Math.floor(Math.random() * TIPS.length);
      const t = TIPS[idx];
      tipEl.innerHTML = `<h3>${t.t}</h3><p>${t.d}</p>`;
    }

    // Progress persistence (completed study block indices)
    function getProgress(){
      return JSON.parse(localStorage.getItem(`progress-${day}`) || '[]');
    }
    function setProgress(arr){
      localStorage.setItem(`progress-${day}`, JSON.stringify(arr));
    }
    function updateProgress(){
      const total = SCHEDULE[day].filter(b => b.subject !== 'Break').length;
      const done = getProgress().length;
      const pct = total ? (done / total) * 100 : 0;
      progressFill.style.width = `${pct}%`;
      progressLabel.textContent = `Progress: ${done} / ${total} blocks`;
    }
    function completeCurrentBlock(){
      const current = SCHEDULE[day][selectedIndex];
      if (!current || current.subject === 'Break') return;
      const done = getProgress();
      if (!done.includes(selectedIndex)){
        done.push(selectedIndex); setProgress(done); updateProgress();
      }
    }

    // Timer controls
    const startBtn = document.getElementById('start');
    const pauseBtn = document.getElementById('pause');
    const resetBtn = document.getElementById('reset');
    const togglePhaseBtn = document.getElementById('toggle-phase');

    startBtn.onclick = () => { if (!timerId) timerId = setInterval(tick, 1000); };
    pauseBtn.onclick = () => { clearInterval(timerId); timerId = null; };
    resetBtn.onclick = () => { clearInterval(timerId); timerId = null; phase === 'study' ? resetTimerToStudy() : resetTimerToBreak(); updateTimerUI(); };
    togglePhaseBtn.onclick = () => {
      clearInterval(timerId); timerId = null;
      if (phase === 'study'){ phase = 'break'; resetTimerToBreak(); } else { phase = 'study'; resetTimerToStudy(); }
      updateTimerUI();
    };

    function tick(){
      timeLeft--;
      updateTimerUI();
      if (timeLeft <= 0){
        clearInterval(timerId); timerId = null;
        if (phase === 'study'){
          completeCurrentBlock();
          phase = 'break'; resetTimerToBreak(); updateTimerUI();
        } else {
          const next = nextStudyIndex(selectedIndex);
          if (next !== null){
            selectedIndex = next; phase = 'study'; resetTimerToStudy(); updateTimerUI();
          } else {
            phaseEl.textContent = 'Day complete. Great work.';
          }
        }
      }
    }

    function nextStudyIndex(i){
      const blocks = SCHEDULE[day];
      for (let k = i+1; k < blocks.length; k++){
        if (blocks[k].subject !== 'Break') return k;
      }
      return null;
    }

    function resetTimerToStudy(){ timeLeft = 45 * 60; phase = 'study'; phaseEl.textContent = '45-minute focused study.'; }
    function resetTimerToBreak(){
      // Determine next break length (5 or 7) based on schedule after current block
      let breakMins = 7;
      const blocks = SCHEDULE[day];
      for (let k = selectedIndex+1; k < blocks.length; k++){
        if (blocks[k].subject === 'Break'){ breakMins = blocks[k].tag.includes('5') ? 5 : 7; break; }
        if (blocks[k].subject !== 'Break') break;
      }
      timeLeft = breakMins * 60;
      phaseEl.textContent = `${breakMins}-minute break. Hydrate, stretch, no scrolling.`;
    }

    function updateTimerUI(){
      const m = Math.floor(timeLeft/60).toString().padStart(2,'0');
      const s = Math.floor(timeLeft%60).toString().padStart(2,'0');
      countdownEl.textContent = `${m}:${s}`;
      updateCurrentBlockLabel();
    }

    function updateCurrentBlockLabel(){
      if (selectedIndex == null || SCHEDULE[day][selectedIndex]?.subject === 'Break'){
        selectedIndex = firstStudyIndex(day);
      }
      const current = SCHEDULE[day][selectedIndex];
      if (current){
        currentBlockEl.textContent = `Current block: ${current.subject} — ${current.tag} (${current.time})`;
      } else {
        currentBlockEl.textContent = 'Current block: —';
      }
    }

    // Toggle full timetable view
    toggleViewBtn.onclick = () => {
      const showingFull = fullTable.style.display !== 'none';
      if (showingFull){
        fullTable.style.display = 'none';
        todayView.style.display = '';
        toggleViewBtn.textContent = 'Switch to Full Timetable';
      } else {
        renderFullTimetable();
        fullTable.style.display = '';
        todayView.style.display = 'none';
        toggleViewBtn.textContent = 'Back to Today’s Plan';
      }
    };

    function renderFullTimetable(){
      weekBody.innerHTML = '';
      const times = [...new Set([].concat(...Object.values(SCHEDULE)).map(b => b.time))];
      times.forEach(time => {
        const tr = document.createElement('tr');
        const th = document.createElement('th'); th.textContent = time; tr.appendChild(th);
        DAYS.forEach(d => {
          const cell = document.createElement('td');
          const block = SCHEDULE[d].find(b => b.time === time);
          if (block){
            cell.innerHTML = `
              <div class="slot">
                <div class="chip ${block.color}"></div>
                <div><strong>${block.subject}</strong><br><span class="muted">${block.tag}</span></div>
              </div>`;
          } else {
            cell.textContent = '';
          }
          tr.appendChild(cell);
        });
        weekBody.appendChild(tr);
      });
    }

    // Init
    function init(){
      setActiveTab(day);
      renderSchedule();
      loadNotes();
      resetTimerToStudy();
      updateProgress();
      setTip();
    }
    init();
  </script>
</body>
</html>
